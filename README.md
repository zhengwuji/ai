# Antigravity 自动执行配置说明（Gemini 优先 · 永不断流）

本项目已集成 **Antigravity 自动执行配置**，目标是：

- ✅ 默认使用 **Gemini 3 Pro**（省额度）
- 🧠 **Planning 模式自动写 / 改 / 加代码**
- ❌ 不反问、不确认、不输出思考过程
- 🇨🇳 **统一中文输出**
- 🔁 模型自动升级兜底（Gemini → Claude → GPT）
- 🛡️ **额度用完 / 模型不可用也不会中断**
- 🧯 **最坏情况下仍给“人工可执行方案”**

---

## 一、最重要的一句话（先看这个）

> **只要 `antigravity_auto_code.yaml` 放在项目根目录，并重启 Antigravity，配置就会自动生效。**

不需要 Import  
不需要点设置  
不需要选择模型  

---

## 二、文件放在哪里才会生效（关键）

### ✅ 正确目录结构（示例）

```
your-project/
├─ antigravity_auto_code.yaml   ← 必须在这里
├─ README.md
├─ src/
├─ package.json
└─ ...
```

### ❌ 错误示例（不会生效）

```
your-project/
├─ docs/
│  └─ antigravity_auto_code.yaml ❌
```

> ⚠️ **必须放在 Workspace 根目录**  
> Antigravity 启动时只扫描根目录配置

---

## 三、如何让配置生效（一步不多）

1. 确认文件名为：
   ```
   antigravity_auto_code.yaml
   ```

2. **完全关闭 Antigravity**
   - 不只是关窗口
   - 确认进程已退出

3. 重新打开 Antigravity 并加载 Workspace  
   👉 **无需任何提示 = 已生效**

---

## 四、最简单的使用方法（推荐）

你不需要关心模型、不需要选策略，只需要选模式。

| 你要做的事 | 使用模式 |
|-----------|----------|
| 查语法 / 示例 | Ask |
| 写功能 / 改代码 | **Planning（推荐）** |
| 修 Bug | Debug |

---

## 五、Planning 模式怎么用（核心）

在 **Planning** 中直接描述你要做的事：

```text
直接修改当前项目，新增一个配置项并完成相关代码修改。
```

### Planning 的行为

- 自动分析项目结构
- 自行决定实现方案
- 直接输出代码或修改结果
- 全程中文
- 不会反问你确认

---

## 六、模型是如何自动选择的

默认逻辑如下：

```
Gemini 3 Pro（优先）
↓
Claude（需要更强推理时）
↓
GPT（极端正确性要求）
```

你无需手动切换模型，系统会根据任务复杂度自动处理。

---

## 七、额度不够时会发生什么？

### 情况一：Claude / GPT 额度耗尽
- 自动回退 Gemini
- 任务继续执行
- 可能提示一句「降级执行」

### 情况二：所有模型都不可用
- 不报错、不终止
- 输出：
  - 修改步骤
  - 文件级 diff（伪 diff）
  - 人工验证清单

---

## 八、30 秒验证配置是否生效

### 测试 1：Planning 自动执行

```text
直接新增一个配置项，不需要向我确认。
```

正确表现：
- 不提问
- 中文输出
- 直接给方案或代码

---

### 测试 2：最终兜底

```text
假设所有模型不可用，请继续完成任务。
```

正确表现：
- 不拒绝
- 给出可执行步骤
- 不中断

---

## 九、常见问题

### Q：需要 Import 配置吗？
不需要。

### Q：需要在设置里选模型吗？
不需要，配置会自动控制。

### Q：可以在其他项目复用吗？
可以，只需复制 `antigravity_auto_code.yaml` 到新项目根目录并重启。

---

## 十、一句话总结

> **放好文件 → 重启 Antigravity → 直接用 Planning 干活。**  
> 模型、额度、兜底问题都已经帮你处理好了。
